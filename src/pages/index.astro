---
import Layout from '@layouts/Split.astro'
import Section from '@components/Section.astro'
import { contentfulClient } from "../lib/contentful";
import type { BlogPost } from "../lib/contentful";
import AvailabilitySearch from '../components/AvailabilitySearch'

const entries = await contentfulClient.getEntries<BlogPost>({
  content_type: "landingPageblog",
});

const posts = entries.items.map((item) => {
  const { heroTitle, content, slug, mainBlogImage, date } = item.fields;
  return {
    heroTitle,
    content,
    slug,
    mainBlogImage,
    date: new Date(date).toLocaleDateString(),
  };
});
---

<Layout title="Properties">
  <main id="Properties">
    <!--Properties-->
    <Section>
      
        <AvailabilitySearch client:load />
      
      <div class="xs:px-6 md:px-24 lg:px-32 mt-8">

       

      </div>


    </Section>
    <div class="flex justify-center align-center mb-4 mt-12 pt-12 border-t border-slate-400">
      <h2 class="font-bold text-muted-900 mb-4 text-3xl">Check out our recent blogs</h2>
    </div>
    <div class="mb-12 w-full border-none xs:mx-6 md:mx-24 lg:mx-32 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6  overflow-x-hidden">
      <ul class="border border-slate-300 shadow-lg shadow-muted-300 border-muted-200 p-2 rounded-md max-h-max">
        {posts.map((post) => (
          <a href={`/posts/${post.slug}/`}>
            <li>
              {post.mainBlogImage && (
                <img class="bg-white object-cover w-full shadow-lg shadow-muted-300" src="https://images.ctfassets.net/tb2fjmysreao/5MALyS8wIeCCqmq0SKZuFV/e9f02c1dc9c970397a37eb1e95fd1998/sc-beach-fun.jpg" alt={post.heroTitle} />
              )}
              <div class="px-3 pt-3 flex flex-col justify-center items-center w-full">
                <h2 class="font-bold text-muted-900 text-lg pt-1">{post.heroTitle}</h2>
                <p class="pt-1 text-center">{post.content}</p>
                <span class="bg-cyan-600 py-2 flex items-strech w-full justify-center text-center text-muted-100 mt-4">Read More</span>
              </div>
            
            </li>
            
          </a>

        ))}
      </ul>
    </div>
  </main>
</Layout>