---

import Layout from '@layouts/Split.astro'
import Section from '@components/Section.astro'
import GuestyListings from '@components/GuestyListings.astro'
import Page2 from '@components/Page2.astro'
import { contentfulClient } from "../lib/contentful";
import type { BlogPost } from "../lib/contentful";

const entries = await contentfulClient.getEntries<BlogPost>({
  content_type: "landingPageblog",
});

const posts = entries.items.map((item) => {
  const { heroTitle, content, slug, mainBlogImage, date } = item.fields;
  return {
    heroTitle,
    content,
    slug,
    mainBlogImage,
    date: new Date(date).toLocaleDateString(),
  };
});

---


<Layout title="Properties">
  <main id="Properties">
    <!--Properties-->
    <Section>
      <div class="xs:px-6 md:px-24 lg:px-32 mt-36">
        <div class="py-3 grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-6">
          <GuestyListings />
        </div>
        <span id="listing2" class="hidden py-4 grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-6">
          <Page2 />
        </span>
        <span class="flex justify-center align-center my-4">
          <button id="showHide" class="bg-cyan-600 px-6 py-2 shadow-md shadow-cyan-500/30 rounded-3xl text-white"> Show More </button>
        </span>
      </div>
      <div class="flex justify-center align-center mb-4 mt-12 pt-12 border-t border-slate-400">
        <h2 class="font-bold text-muted-900 text-3xl">Check out our recent blogs</h2>
      </div>
      <div class="mb-12 w-full border-none xs:mx-6 md:mx-24 lg:mx-32 grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-6">
        <ul class="border shadow-lg shadow-muted-300/30 border-muted-200 rounded-md max-h-max">
      {posts.map((post) => (
          <a href={`/posts/${post.slug}/`}>
        <li>
          {post.mainBlogImage && (
            <img class="bg-white object-cover w-full" src="https://images.ctfassets.net/tb2fjmysreao/5MALyS8wIeCCqmq0SKZuFV/e9f02c1dc9c970397a37eb1e95fd1998/sc-beach-fun.jpg" alt={post.heroTitle} />
          )}
        <div class="px-1 pt-2 flex flex-col justify-center items-center w-full">
             <h2 class="font-bold text-muted-900 text-lg pt-1">{post.heroTitle}</h2>
             <p class="pt-1 text-center">{post.content}</p>
            </div>
        </li>
          </a>
      ))}
    </ul>
   </div>

 </div>
      
      </Container>     
    </Section>   
  </main>
</Layout>
