---
import { processListing } from "../utils/utils.ts";
import ListingPageDetail from '@components/ListingPageDetail.astro';
import listings from '../pages/api/gapi'

export async function getStaticPaths() {

  const paths = listings.map(listing => ({
    params: {
      listingPage: processListing(listings.title, listings._id)
    },
    props: {
      listings: listing,
      _id: listings._id,
      title: listings.title,
      address: listings.address,
      description: listings.description,
      propertyType: listings.propertyType,
      bathrooms: listings.bathrooms,
      pictures: listings.pictures,
      beds: listings.beds
    }
  }));

  return paths;
}


const {description, title, address, beds, propertyType, bathrooms, pictures, lineListing = [], _id} = Astro.props;

---

<ListingPageDetail
          lineListing={lineListing}
          title={title}
          _id={_id}
          address={address}
          description={description}
          PropertyType={propertyType}
          bathrooms={bathrooms}
          pictures={pictures}
          beds={beds}
        />