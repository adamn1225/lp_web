---
import { processListing } from "../utils/utils.ts"
import ListingPageDetail from '@components/ListingPageDetail.astro'
import fetchListings from '@/pages/api/fetch-listings.ts';




export async function getStaticPaths() {
// let query = parseInt(allListings.publicDescription);
// let desc = allListings.find((publicDescription: any) => publicDescription === query);
const allListings = await fetchListings();
const paths = allListings.map(() => ({
params: {
  listingPage: processListing(allListings.title, allListings._id) 
},
props: {
  lineListing: allListings,
  _id: allListings._id,
  title: allListings.title,
  address: allListings.address,
  description: allListings.picture.title,
  propertyType: allListings.propertyType,
  bathrooms: allListings.bathrooms,
  pictures: allListings.pictures,
  beds: allListings.beds
}
}));

return paths;
}
const {description, title, address, beds, propertyType, bathrooms, pictures, _id} = Astro.props;

---

<ListingPageDetail
          title={title}
          _id={_id}
          address={address}
          description={description}
          PropertyType={propertyType}
          bathrooms={bathrooms}
          pictures={pictures}
          beds={beds}
        />