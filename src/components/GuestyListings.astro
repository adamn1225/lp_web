---
import { currency } from '@utils/utils'
import allListings from '../pages/api/guesty'



const pages = [
  {
    slug: allListings._id,
    id: allListings._id,
  }
  
]
const {slug} = Astro.params;
const page = pages.find((page) => page.slug === slug);
if (!page) return Astro.redirect("/404");
const { id } = page;
---
{
    allListings.map(({bedrooms, picture, pictures, title, address, bathrooms, prices, accommodates, _id, results}) => (
<a href={_id}>
    <article class="bg-white shadow-lg shadow-muted-300/30">
            <div class="bg-muted-100 dark:bg-muted-800 h-full">
            <img class="h-56 md:h-full w-full object-cover" id="string" src={pictures[0].original} />
          </div>
          <div class="p-5 bg-white border border-muted-200">
        <div class="flex flex-col">
          <h4 class="font-sans font-bold text-xl text-muted-900 dark:text-white">
            {title} 
          </h4>
          <h3 class="font-sans font-bold text-xl text-muted-900 dark:text-white">
            ${prices.basePrice}/ Day
          </h3>
          <p class="text-sm text-muted-400">
            
            {address.city}, {address.state}
          </p>
        </div>
        <hr class="h-px border-t border-muted-200 dark:border-muted-800 my-5" />
        <div class="grid grid-cols-3">
          <!-- bedroom -->
          <div class="flex flex-col">
            <div class="flex items-center gap-2 text-muted-900 dark:text-white">
              <svg
                class="size-4"
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                style="--darkreader-inline-stroke: currentColor;"
                data-darkreader-inline-stroke=""
                ><path d="M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8"></path><path d="M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4"></path><path d="M12 4v6"></path><path d="M2 18h20"></path>
              </svg>
  
              <p class="text-lg font-bold">{bedrooms}</p>
            </div>
  
            <p class="text-sm text-muted-400">Bedrooms</p>
          </div>
          <!-- bathroom -->
          <div class="flex flex-col">
            <div class="flex items-center gap-2 text-muted-900 dark:text-white">
              <svg
                class="size-4"
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                style="--darkreader-inline-stroke: currentColor;"
                data-darkreader-inline-stroke=""
                ><path d="M9 6 6.5 3.5a1.5 1.5 0 0 0-1-.5C4.683 3 4 3.683 4 4.5V17a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5"></path><line x1="10" y1="5" x2="8" y2="7"></line><line
                  x1="2"
                  y1="12"
                  x2="22"
                  y2="12"></line><line x1="7" y1="19" x2="7" y2="21"></line><line x1="17" y1="19" x2="17" y2="21"></line>
              </svg>
  
              <p class="text-lg font-bold">{bathrooms}</p>
            </div>
  
            <p class="text-sm text-muted-400">Bathroom</p>
          </div>
          <!-- living area -->
          <div class="flex flex-col">
            <div class="flex items-center gap-2 text-muted-900 dark:text-white justify-center">
              <p class="text-lg font-bold">{accommodates}</p>
            </div>
  
            <p class="text-sm text-muted-400">Accomodates</p>
          </div>

        </div>
      </div>
    </article>
  </a>
  )
  )
  } 